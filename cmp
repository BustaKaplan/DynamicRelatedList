<aura:component controller="FilteredRelatedList" implements="force:appHostable, flexipage:availableForAllPageTypes,forceCommunity:availableForAllPageTypes" access="global" >
	<!--Attributes -->
    <aura:attribute name="relatedRecords" type="Object[]" />
    <aura:attribute name="relatedRecordsDynamic" type="Object[]" />
    <aura:attribute name="recordId" type="Task" />
    <aura:attribute name="compactDisplay" type="boolean" default = "True" />
    <aura:attribute name="showButton" type="boolean" default = "True" />
    
    <!--Design attributes-->
    <aura:attribute name="selectedObject" type = "String" default = "Account"/>
    <aura:attribute name="Header" type = "String"/>
    <aura:attribute name="object" type = "String"/>
    <aura:attribute name="field1" type = "String"/>
    <aura:attribute name="field2" type = "String"/>
    <aura:attribute name="field3" type = "String"/>
    <aura:attribute name="field4" type = "String"/>
	<aura:attribute name="filter" type = "String"/>
    <!--Handler-->
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <!--DELETE-->
    <aura:attribute name="greeting" type = "String"/>
    
    <article class="slds-card">
        <!--Header-->
  		<div class="slds-card__header slds-grid">
    		<header class="slds-media slds-media_center slds-has-flexi-truncate">
      			<div class="slds-media__body">
        			<h2 class="slds-card__header-title">
          				<div class="slds-card__header-link slds-truncate" title="Headlines">
            				<span>{!v.Header}</span>
          				</div>
        			</h2>
      			</div>
    		</header>
  		</div>
		<table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_striped slds-table_fixed-layout slds-table_resizable-cols">
  			<thead>
    			<tr class="slds-line-height_reset"> 
                    <th scope="col"><span class="slds-truncate">{!v.field1}</span></th>
                	<th scope="col"><span class="slds-truncate">{!v.field2}</span></th>
                    <th scope="col"><span class="slds-truncate">{!v.field3}</span></th>
                    <th scope="col"><span class="slds-truncate">{!v.field4}</span></th>
            	</tr> 
    		</thead>
        	<tbody>
                <!--Compact View --> 
                <aura:if isTrue="{!v.compactDisplay}">
            		<aura:iteration items="{!v.relatedRecords}" var="record" indexVar="idx">
            			<aura:if isTrue="{!lessthan(idx,5)}">
                			<tr class="slds-line-height_reset slds-has-flexi-truncate">
                                <td>{!record.field1}</td>
                                <td>{!record.field2}</td>
                                <td>{!record.field3}</td>
                                <td>{!record.field4}</td>
                        		<!--<td class="slds-truncate"><a href="{!'/lightning/r/Task/' + task.Id + '/view'}">{!task.Subject}</a></td>-->                                   
                			</tr>
                        </aura:if>
            		</aura:iteration>
                </aura:if>
                <!--Expanded view-->
                <aura:if isTrue="{!not(v.compactDisplay)}">
                	<aura:iteration items="{!v.relatedRecords}" var="record" indexVar="idx">
            			<tr class="slds-line-height_reset">
                            <td>{!record.field1}</td>
                            <td>{!record.field2}</td>
                            <td>{!record.field3}</td>
                            <td>{!record.field4}</td>
                    		<!--<td class="slds-truncate" ><a href="{!'/lightning/r/Task/' + task.Id + '/view'}">{!task.Subject}</a></td>-->                                     
                		</tr>
                    </aura:iteration>
                </aura:if>
        	</tbody>
            
        </table>
        <!-- View All Button -->
        <div class="slds-card__footer">
        	<aura:if isTrue="{!v.compactDisplay}" >
       			<lightning:button aura:id= "viewAll" variant="base" label="View All" onclick="{!c.viewAll}" class="slds-align_absolute-center"  /> 
        	</aura:if>
        	<aura:if isTrue="{!not(v.compactDisplay)}" >
       			<lightning:button aura:id= "viewSome" variant="base" label="View Some" onclick="{!c.viewAll}" class="slds-align_absolute-center"  /> 
        	</aura:if>
        </div>
    </article>
</aura:component>
